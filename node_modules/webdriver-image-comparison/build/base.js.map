{"version":3,"file":"base.js","sourceRoot":"","sources":["../lib/base.ts"],"names":[],"mappings":";;AAAA,6BAAqC;AACrC,qCAAoC;AACpC,6CAAiD;AACjD,iDAA4C;AAI5C;IAIE,mBAAY,OAAqB;QAE/B,IAAI,CAAC,cAAc,GAAG,wBAAc,CAAC,OAAO,CAAC,CAAC;QAE9C,IAAI,cAAc,CAAC;QACnB,IAAI,UAAU,CAAC;QAEf,IAAI,OAAO,OAAO,CAAC,cAAc,KAAK,UAAU,EAAE;YAChD,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;SAClD;aAAM;YACL,cAAc,GAAG,gBAAS,CAAC,OAAO,CAAC,cAAc,IAAI,mBAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SAC5E;QAED,IAAI,OAAO,OAAO,CAAC,cAAc,KAAK,UAAU,EAAE;YAChD,UAAU,GAAG,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;SAC9C;aAAM;YACL,UAAU,GAAG,gBAAS,CAAC,OAAO,CAAC,cAAc,IAAI,mBAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;SAC/E;QAED,IAAI,CAAC,OAAO,GAAG;YACb,YAAY,EAAE,WAAI,CAAC,UAAU,EAAE,mBAAO,CAAC,MAAM,CAAC;YAC9C,cAAc,gBAAA;YACd,UAAU,EAAE,WAAI,CAAC,UAAU,EAAE,mBAAO,CAAC,IAAI,CAAC;SAC3C,CAAC;QAEF,IAAI,OAAO,CAAC,kBAAkB,EAAE;YAC9B,qBAAU,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC;YACtC,qBAAU,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;SACrC;IACH,CAAC;IACH,gBAAC;AAAD,CAAC,AAlCD,IAkCC","sourcesContent":["import {join, normalize} from 'path';\nimport {removeSync} from 'fs-extra';\nimport {defaultOptions} from './helpers/options';\nimport {FOLDERS} from './helpers/constants';\nimport {Folders} from './base.interface';\nimport {ClassOptions, DefaultOptions} from './helpers/options.interface';\n\nexport default class BaseClass {\n  defaultOptions: DefaultOptions;\n  folders: Folders;\n\n  constructor(options: ClassOptions) {\n    // determine default options\n    this.defaultOptions = defaultOptions(options);\n\n    let baselineFolder;\n    let baseFolder;\n\n    if (typeof options.baselineFolder === 'function') {\n      baselineFolder = options.baselineFolder(options);\n    } else {\n      baselineFolder = normalize(options.baselineFolder || FOLDERS.DEFAULT.BASE);\n    }\n\n    if (typeof options.screenshotPath === 'function') {\n      baseFolder = options.screenshotPath(options);\n    } else {\n      baseFolder = normalize(options.screenshotPath || FOLDERS.DEFAULT.SCREENSHOTS);\n    }\n\n    this.folders = {\n      actualFolder: join(baseFolder, FOLDERS.ACTUAL),\n      baselineFolder,\n      diffFolder: join(baseFolder, FOLDERS.DIFF),\n    };\n\n    if (options.clearRuntimeFolder) {\n      removeSync(this.folders.actualFolder);\n      removeSync(this.folders.diffFolder);\n    }\n  }\n}\n"]}