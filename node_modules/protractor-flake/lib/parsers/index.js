"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cucumber_1 = require("./cucumber");
const path_1 = require("path");
const multi_1 = require("./multi");
const standard_1 = require("./standard");
const all = { cucumber: cucumber_1.default, multi: multi_1.default, standard: standard_1.default };
exports.all = all;
function handleObject(parserObject) {
    if (typeof parserObject.parse !== 'function') {
        throw new Error(`Invalid Parser Object specified. Your parser must define a \`parse\` method`);
    }
    return parserObject;
}
function handlePath(parserPath) {
    // 'my-custom-parser' or './my-custom-parser'
    try {
        return require(parserPath);
    }
    catch (e) { }
    // /path/to/parser or ../path/to/parser
    try {
        return require(path_1.resolve(parserPath));
    }
    catch (e) { }
    throw new Error(`Invalid Custom Parser Path Specified: ${parserPath}`);
}
function handleFlakeParser(parserName) {
    if (all[parserName]) {
        return all[parserName];
    }
    else {
        throw new Error(`Invalid Parser Specified: ${parserName}`);
    }
}
function getParser(parser = '') {
    if (parser.hasOwnProperty('parse')) {
        return handleObject(parser);
    }
    if (path_1.extname(parser)) {
        return handlePath(parser);
    }
    return handleFlakeParser(parser);
}
exports.getParser = getParser;
//# sourceMappingURL=index.js.map